# KinoVzor - Мобильная кинотека с рецензиями

Приложение для просмотра, рецензирования и оценки фильмов. Полнофункциональный веб-портал кинотеки с поддержкой пользовательских профилей, модерацией контента и административной панелью.

## 📋 Содержание
- [Быстрая установка](#быстрая-установка)
- [Системные требования](#системные-требования)
- [Полная инструкция установки](#полная-инструкция-установки)
- [Как работает приложение](#как-работает-приложение)
- [Основные функции](#основные-функции)
- [Архитектура](#архитектура)
- [Структура проекта](#структура-проекта)
- [Первые шаги после установки](#первые-шаги-после-установки)

---

## ⚡ Быстрая установка

### Минимальные требования для запуска (2-3 минуты)

```bash
# 1. Клонируем репозиторий
git clone https://github.com/Artem2335/kino1.git
cd kino1

# 2. Создаем виртуальное окружение
python -m venv venv

# 3. Активируем окружение
# На Windows:
venv\Scripts\activate
# На macOS/Linux:
source venv/bin/activate

# 4. Устанавливаем зависимости
pip install -r requirements.txt

# 5. Инициализируем БД и загружаем данные
python init_db.py
python seed_db.py

# 6. Запускаем приложение
python run.py
```

✅ Приложение будет доступно на: **http://localhost:5000**

---

## 💻 Системные требования

- **Python**: 3.9 или выше
- **ОС**: Windows, macOS, Linux
- **Место на диске**: ~200 MB (включая БД)
- **Оперативная память**: минимум 512 MB

### Необходимые зависимости (из requirements.txt):
- Flask - веб-фреймворк
- Flask-SQLAlchemy - ORM для работы с БД
- Flask-Login - система аутентификации
- Flask-WTF - работа с формами
- SQLAlchemy - работа с БД
- Flask-Admin - административная панель
- Другие вспомогательные библиотеки

---

## 📚 Полная инструкция установки

### Шаг 1: Подготовка окружения

```bash
# Проверяем версию Python (требуется 3.9+)
python --version

# Если установлено несколько версий:
python3.9 --version
```

### Шаг 2: Клонирование и навигация

```bash
# Клонируем репозиторий
git clone https://github.com/Artem2335/kino1.git

# Переходим в папку проекта
cd kino1
```

### Шаг 3: Создание виртуального окружения

```bash
# Создаем виртуальное окружение
python -m venv venv

# Активируем:
# Windows:
venv\Scripts\activate

# macOS/Linux:
source venv/bin/activate
```

### Шаг 4: Установка зависимостей

```bash
# Обновляем pip (опционально, но рекомендуется)
pip install --upgrade pip

# Устанавливаем все необходимые пакеты
pip install -r requirements.txt
```

### Шаг 5: Настройка переменных окружения

```bash
# Копируем пример файла конфигурации
cp .env.example .env

# Отредактируйте .env файл с необходимыми параметрами
# Обычно там указаны:
# - DATABASE_URL
# - SECRET_KEY
# - FLASK_ENV=development
```

### Шаг 6: Инициализация и заполнение БД

```bash
# Создаем таблицы в БД
python init_db.py

# Заполняем БД примерными данными (фильмы, пользователи и т.д.)
python seed_db.py
```

### Шаг 7: Запуск приложения

```bash
# Запускаем Flask приложение
python run.py
```

После запуска вы должны увидеть что-то вроде:
```
 * Running on http://127.0.0.1:5000
 * Press CTRL+C to quit
```

✅ **Готово!** Откройте браузер и перейдите на **http://localhost:5000**

---

## 🎬 Как работает приложение

### Архитектура

KinoVzor построен на классической архитектуре MVC (Model-View-Controller):

```
┌─────────────────────────────────────┐
│     Веб-браузер (Фронтенд)          │
│     HTML/CSS/JavaScript              │
└──────────────┬──────────────────────┘
               │
       ↓ HTTP Запросы/Ответы ↓
               │
┌──────────────┴──────────────────────┐
│     Flask Приложение (Бэкенд)       │
│  ┌─────────────────────────────┐   │
│  │ Routes (Маршруты)           │   │
│  │ - /films - Список фильмов   │   │
│  │ - /films/<id> - Деталь      │   │
│  │ - /login - Вход             │   │
│  │ - /profile - Профиль        │   │
│  │ - /admin - Админ-панель     │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ Controllers (Логика)        │   │
│  │ Обработка запросов          │   │
│  │ Валидация данных            │   │
│  └─────────────────────────────┘   │
└──────────────┬──────────────────────┘
               │
       ↓ SQL Запросы ↓
               │
┌──────────────┴──────────────────────┐
│     SQLAlchemy ORM                  │
│     ┌──────────────────────────┐   │
│     │ Models (Модели):         │   │
│     │ - User (Пользователь)    │   │
│     │ - Film (Фильм)           │   │
│     │ - Review (Рецензия)      │   │
│     │ - Rating (Рейтинг)       │   │
│     │ - Genre (Жанр)           │   │
│     └──────────────────────────┘   │
└──────────────┬──────────────────────┘
               │
       ↓ Сохранение данных ↓
               │
┌──────────────┴──────────────────────┐
│  SQLite База данных (kinovzor.db)   │
│  Таблицы для всех моделей           │
└─────────────────────────────────────┘
```

### Процесс работы пользователя

1. **Регистрация/Вход**
   - Пользователь создает учетную запись или входит
   - Система проверяет пароль и создает сессию
   - Данные сохраняются в таблице `user`

2. **Просмотр фильмов**
   - На главной странице отображается список фильмов из БД
   - Можно фильтровать по жанрам
   - Можно сортировать по рейтингу, году, названию

3. **Просмотр деталей фильма**
   - Клик на фильм показывает:
     - Описание и постер
     - Год выпуска
     - Рейтинг пользователей
     - Все рецензии
     - Среднюю оценку

4. **Написание рецензии**
   - Авторизованный пользователь может:
     - Оставить оценку (1-10 звезд)
     - Написать текст рецензии
     - Отредактировать/удалить свою рецензию

5. **Добавление в избранное**
   - Пользователь может сохранять фильмы в личный список
   - Список доступен в профиле

6. **Модерация контента**
   - Модератор может удалять неуместные рецензии
   - Может управлять жалобами пользователей

7. **Административная панель**
   - Администратор может:
     - Добавлять/редактировать/удалять фильмы
     - Управлять пользователями
     - Просматривать статистику
     - Управлять жанрами

---

## ⭐ Основные функции

### Для обычных пользователей
- ✅ **Регистрация и аутентификация** - безопасный вход через пароль
- ✅ **Просмотр каталога фильмов** - с информацией о годе, жанре, рейтинге
- ✅ **Фильтрация и сортировка** - по жанрам, рейтингу, году
- ✅ **Написание рецензий** - оставление отзывов с оценкой
- ✅ **Оценивание фильмов** - система звезд (1-10)
- ✅ **Добавление в избранное** - создание личного списка фильмов
- ✅ **Профиль пользователя** - просмотр своих рецензий и избранного

### Для модераторов
- ✅ **Управление рецензиями** - удаление неуместного контента
- ✅ **Просмотр жалоб** - на рецензии и комментарии
- ✅ **Модерация контента** - проверка качества отзывов

### Для администраторов
- ✅ **Полная административная панель** (Flask-Admin)
- ✅ **Управление фильмами** - CRUD операции
- ✅ **Управление пользователями** - блокировка, удаление
- ✅ **Управление жанрами** - добавление новых категорий
- ✅ **Просмотр статистики** - аналитика использования
- ✅ **Управление правами** - назначение ролей пользователям

---

## 📁 Структура проекта

```
kino1/
├── app/                          # Основная папка приложения
│   ├── __init__.py              # Инициализация приложения
│   ├── models.py                # Модели БД (User, Film, Review и т.д.)
│   ├── forms.py                 # WTForms для валидации данных
│   ├── views.py                 # Маршруты и контроллеры
│   ├── auth.py                  # Логика аутентификации
│   ├── templates/               # HTML шаблоны
│   │   ├── base.html           # Базовый шаблон
│   │   ├── index.html          # Главная страница
│   │   ├── film_list.html      # Список фильмов
│   │   ├── film_detail.html    # Деталь фильма
│   │   ├── review.html         # Написание рецензии
│   │   ├── login.html          # Страница входа
│   │   ├── register.html       # Страница регистрации
│   │   └── profile.html        # Профиль пользователя
│   └── static/                  # Статические файлы
│       ├── css/                # Стили
│       │   └── style.css
│       ├── js/                 # JavaScript
│       └── images/             # Изображения
│
├── migrations/                   # Alembic миграции БД
├── config.py                    # Конфигурация приложения
├── run.py                       # Точка входа (запуск приложения)
├── init_db.py                   # Инициализация БД
├── seed_db.py                   # Заполнение тестовых данных
├── requirements.txt             # Зависимости Python
├── .env.example                 # Пример конфигурации
├── alembic.ini                  # Конфигурация миграций
└── kinovzor.db                  # База данных SQLite
```

---

## 🚀 Первые шаги после установки

### 1. Вход в приложение

После запуска перейдите на `http://localhost:5000`

### 2. Учетные данные по умолчанию (из seed_db.py)

Администратор:
- **Email**: admin@example.com
- **Пароль**: admin123

Модератор:
- **Email**: moderator@example.com
- **Пароль**: moderator123

Обычный пользователь:
- **Email**: user@example.com
- **Пароль**: user123

### 3. Разные роли - разные возможности

**Обычный пользователь**:
- Смотрит каталог фильмов
- Пишет рецензии
- Оценивает фильмы
- Создает список избранного

**Модератор**:
- Все как у обычного пользователя
- + Удаление неуместных рецензий
- + Просмотр жалоб

**Администратор**:
- Все как у модератора
- + Административная панель (/admin)
- + Управление фильмами
- + Управление пользователями
- + Управление жанрами
- + Просмотр статистики

### 4. Административная панель

После входа как администратор, перейдите на:
```
http://localhost:5000/admin
```

Там вы можете:
- Добавлять новые фильмы
- Редактировать информацию о фильмах
- Управлять пользователями
- Просматривать все рецензии
- Добавлять жанры

---

## 🔧 Решение частых проблем

### Проблема: `ModuleNotFoundError: No module named 'flask'`
**Решение**: Убедитесь, что виртуальное окружение активировано и установлены зависимости:
```bash
pip install -r requirements.txt
```

### Проблема: Порт 5000 уже занят
**Решение**: Отредактируйте `run.py`:
```python
if __name__ == '__main__':
    app.run(debug=True, port=5001)  # Измените порт на 5001
```

### Проблема: БД не создается
**Решение**: Запустите инициализацию заново:
```bash
rm kinovzor.db  # Удалите старую БД
python init_db.py
python seed_db.py
```

### Проблема: Забыли пароль админа
**Решение**: Пересоздайте БД или отредактируйте `seed_db.py` и перезагрузите данные

---

## 📖 Дополнительная информация

### Технический стек
- **Backend**: Flask (Python)
- **Frontend**: HTML5, CSS3, JavaScript
- **Database**: SQLite с SQLAlchemy ORM
- **Authentication**: Flask-Login
- **Admin Panel**: Flask-Admin
- **Forms**: Flask-WTF
- **Database Migrations**: Alembic

### Полезные команды

```bash
# Запуск в режиме разработки
python run.py

# Создание новой миграции БД
alembic revision --autogenerate -m "Description"

# Применение миграций
alembic upgrade head

# Деактивация виртуального окружения
deactivate
```

---

## 💡 Советы для разработчиков

1. **Используйте виртуальное окружение** - это обязательно для любого Python проекта
2. **Читайте логи** - они помогут понять, что не так
3. **Используйте Chrome DevTools** (F12) - для отладки фронтенда
4. **Включите debug режим** - в `run.py` уже включен для разработки
5. **Регулярно коммитьте** - используйте git для отслеживания изменений

---

## 📝 Лицензия

Этот проект создан как учебный проект.

---

## ✉️ Контакты

Автор: Artem2335
Email: art20072975@gmail.com
GitHub: https://github.com/Artem2335/kino1

---

**Последнее обновление**: Декабрь 2025
